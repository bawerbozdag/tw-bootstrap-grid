name: Vitest Tests

on:
    push:
        paths:
            - "**"
    pull_request:
        paths:
            - "**"

jobs:
    install:
        name: Install Dependencies
        runs-on: ubuntu-22.04

        steps:
            - uses: actions/checkout@v4

            - uses: actions/setup-node@v4
              with:
                  node-version: "20"
                  cache: "npm"
                  cache-dependency-path: "package-lock.json"

            - name: Install dependencies
              run: npm install

        test-v3:
            name: Tailwind v3 Tests
            runs-on: ubuntu-22.04

            steps:
                - uses: actions/checkout@v4

                - uses: actions/setup-node@v4
                  with:
                      node-version: 20.x
                      cache: "npm"

                - name: Install deps & test v3
                  run: npm run test:v3

        test-v4:
            name: Tailwind v4 Tests
            runs-on: ubuntu-22.04

            steps:
                - uses: actions/checkout@v4

                - uses: actions/setup-node@v4
                  with:
                      node-version: 20.x
                      cache: "npm"

                - name: Install deps & test v4
                  run: npm run test:v4
